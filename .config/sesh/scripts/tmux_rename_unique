#!/usr/bin/env bash
set -euo pipefail

kind="${1:-session}"
context="${2:-local}"

normalize() {
  printf '%s' "$1" \
    | tr '[:upper:]' '[:lower:]' \
    | tr -cs '[:alnum:]_-' '-'
}

kind="$(normalize "$kind")"
context="$(normalize "$context")"
timestamp="$(date +%m%d-%H%M%S)"
session_name="${kind}-${context}-${timestamp}"

if [ -n "${TMUX:-}" ] && command -v tmux >/dev/null 2>&1; then
  tmux rename-session "$session_name"
fi
